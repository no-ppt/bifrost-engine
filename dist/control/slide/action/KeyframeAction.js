(function(global,factory){if(typeof define==='function'&&define.amd){define(['exports','tween','./Action'],factory)}else if(typeof exports!=='undefined'){factory(exports,require('tween'),require('./Action'))}else {var mod={exports:{}};factory(mod.exports,global.tween,global.Action);global.KeyframeAction=mod.exports}})(this,function(exports,_tween,_Action2){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _tween2=_interopRequireDefault(_tween);var _Action3=_interopRequireDefault(_Action2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value' in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DEFAULT_DURATION=1000;var DEFAULT_EASING='Sinusoidal.InOut'; /**
 *
 * @author hermit
 * @version 1.0.0
 */var KeyframeAction=function(_Action){_inherits(KeyframeAction,_Action);function KeyframeAction(params){_classCallCheck(this,KeyframeAction);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(KeyframeAction).call(this,params));_this._target=params.target;_this._from=params.from||{};_this._to=params.to||{};_this._duration=params.duration||DEFAULT_DURATION;_this._easing=params.easing||DEFAULT_EASING;_this._createEasing();return _this}_createClass(KeyframeAction,[{key:'forward',value:function forward(engine){this._animate(engine,this._to)}},{key:'backward',value:function backward(engine){this._animate(engine,this._from)}},{key:'_createEasing',value:function _createEasing(){var pair=this._easing.split('.');var equation=pair[0];var easing=pair[1];this._toEasing(equation,easing);this._fromEasing(equation,easing)}},{key:'_toEasing',value:function _toEasing(equation,easing){this._to.easing=_tween2.default.Easing[equation][easing]||_tween2.default.Easing.Sinusoidal.InOut}},{key:'_fromEasing',value:function _fromEasing(equation,easing){var reverse=void 0;switch(easing){case 'In':reverse='Out';break;case 'Out':reverse='In';break;case 'InOut':reverse='InOut';break;default:reverse='InOut';}this._from.easing=_tween2.default.Easing[equation][reverse]||_tween2.default.Easing.Sinusoidal.InOut}},{key:'_animate',value:function _animate(engine,object){ // Get component.
var component=engine.get(this._target); // Check component.
if(!component){ // TODO> LOG.
return} // Define tween list.
var tweens=[];if(object.position){tweens.push(new _tween2.default.Tween(component.position).to(object.position,this._duration).easing(object.easing))}if(object.rotation){var rotation={x:object.rotation.x!=null?object.rotation.x*Math.PI/180:component.rotation.x,y:object.rotation.y!=null?object.rotation.y*Math.PI/180:component.rotation.y,z:object.rotation.z!=null?object.rotation.z*Math.PI/180:component.rotation.z};tweens.push(new _tween2.default.Tween(component.rotation).to(rotation,this._duration).easing(object.easing))}if(object.opacity!=null){tweens.push(new _tween2.default.Tween({opacity:component._opacity}).to({opacity:object.opacity},this._duration).onUpdate(function(){component.opacity=this.opacity}).easing(object.easing))} // Execute tween.
tweens.forEach(function(t){return t.start()})}}]);return KeyframeAction}(_Action3.default);exports.default=KeyframeAction});